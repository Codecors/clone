<html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script>

// connect to nodejs server
var urlarr = window.location.href.split("/");
var server = urlarr[0] + "//" + urlarr[2]
var socket = io.connect(server);
socket.emit('guid', {});  // request guid

// got a guid - store it
var guid = null;
socket.on('guid', function (data) {
    guid = data.value;
});

// send pid and guid to server, and go to appropriate page
function start(destination){
    var pid = document.getElementById('participantid').value;
    socket.emit('start', { "url": destination, "pid": pid, "guid": guid });
    location.assign(destination + "?uid=" + guid + "&pid=" + pid);
}

</script>

<title>Start page</title>
</head>
<body>
    <h2>Participant ID</h2>
    <p><input id='participantid' type='text'/></p>

    <h2>Select whether to start with wheel or dial:</h2>
    <hr>
    <p>
        <button onclick="start('/wheel')">Wheel</button>
        <button onclick="start('/dial')">Dial</button>
    </p>

</body>
